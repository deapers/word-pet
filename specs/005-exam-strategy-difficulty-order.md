# 规格文档：出题策略调整 - 实现先易后难顺序

## 1. 需求概述

当前WordPet应用的出题策略是根据句子掌握度（mastery）进行排序，掌握度低的句子优先出现。然而，这种策略没有考虑句子的难度等级，在教学设计上需要实现先易后难的出题顺序，以符合儿童学习的渐进性原则。

## 2. 目标功能

- 调整出题算法，使游戏中的句子按照先易后难的顺序出现
- 保留原有的掌握度机制，但在同等掌握度水平下，优先展示难度较低的句子
- 确保错误袋（mistake bag）的句子也遵循先易后难原则
- 维持现有的学习路径设计，使儿童能够循序渐进地学习

## 3. 实现细节

### 3.1 排序策略
- 首先按句子难度排序：easy → medium → hard
- 在同一难度级别内，按掌握度排序：掌握度低的句子优先出现
- 错误袋的句子继续维持30%的出现概率，但同样应用先易后难原则

### 3.2 数据结构要求
- 每个句子具有 `difficulty` 属性：`easy`, `medium`, `hard`
- 每个句子具有 `mastery` 属性：0.0 到 1.0 之间的数值

### 3.3 算法设计
- 难度分级：easy=0, medium=1, hard=2
- 综合排序权重 = (难度权重 × 难度系数) + (掌握度权重 × (1 - 掌握度))
- 优先选择综合权重值较低的句子

## 4. 技术实现

### 4.1 文件修改
- 修改 `data.js` 中的 `DataUtil.getNextLowMasterySentence()` 方法
- 保留 `DataUtil.getNextSentence()` 方法的错误袋逻辑

### 4.2 数据结构
- 保持现有的句子数据结构不变
- 利用现有的 `difficulty` 和 `mastery` 属性实现新排序算法

### 4.3 兼容性
- 保持与现有LocalStorage数据格式的兼容性
- 确保新策略不影响现有的掌握度系统、错误袋等功能
- 保持与现有游戏界面和交互逻辑的兼容性

## 5. 测试要求

### 5.1 功能测试
- 验证新出题策略是否按预期工作
- 确保难度较低的句子优先出现
- 检查同等难度下掌握度较低的句子是否优先

### 5.2 用户体验测试
- 验证学习曲线是否更符合渐进性原则
- 检查游戏流畅度是否受到影响
- 确认儿童用户是否更容易接受这种出题顺序

## 6. 实施步骤

1. 分析当前出题逻辑，确定需要修改的代码部分
2. 实现出题算法的先易后难排序策略
3. 测试新策略是否正确按难度和掌握度排序
4. 验证错误袋功能是否正常工作
5. 测试整体游戏体验和性能

## 7. 预期效果

- 学习路径更加平滑，儿童能够从简单句子开始逐步提升
- 降低初学者的挫败感，增强学习兴趣
- 保持现有的掌握度机制，确保有效复习
- 提升整体学习效果和用户留存率